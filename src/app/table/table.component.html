<p-table
  [value]="user"
  dataKey="name"
  (onRowExpand)="getPosts($event)"
  rowExpandMode="single"
>
  <ng-template pTemplate="header">
    <tr>
      <th style="width: 3rem"></th>
      <th pSortableColumn="name">
        Name <p-sortIcon field="name"></p-sortIcon>
      </th>
      <th>Image</th>
      <th pSortableColumn="price">
        UserName <p-sortIcon field="price"></p-sortIcon>
      </th>
      <th pSortableColumn="category">
        Id <p-sortIcon field="category"></p-sortIcon>
      </th>
      <th pSortableColumn="rating">
        Email <p-sortIcon field="rating"></p-sortIcon>
      </th>
      <th pSortableColumn="inventoryStatus">
        Status <p-sortIcon field="inventoryStatus"></p-sortIcon>
      </th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-user let-expanded="expanded">
    <tr>
      <td>
        <button
          type="button"
          pButton
          pRipple
          [pRowToggler]="user"
          class="p-button-text p-button-rounded p-button-plain"
          [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"
        ></button>
      </td>
      <td>{{ user.name }}</td>
      <td><img src="assets/1.png" width="100" class="p-shadow-4" /></td>
      <td>{{ user.username }}</td>
      <td>{{ user.id }}</td>
      <td>{{ user.email }}</td>
      <td>
        <span>{{ user.city }}</span>
      </td>
    </tr>
  </ng-template>

  <ng-template pTemplate="rowexpansion">
    <tr>
      <td colspan="7">
        <p-table
          [value]="posts"
          dataKey="id"
          (onRowExpand)="getComments($event)"
          rowExpandMode="single"
        >
          <ng-template pTemplate="header">
            <tr>
              <th pSortableColumn="id">
                Id <p-sortIcon field="price"></p-sortIcon>
              </th>
              <th pSortableColumn="customer">
                Customer <p-sortIcon field="customer"></p-sortIcon>
              </th>
              <th pSortableColumn="date">
                Date <p-sortIcon field="date"></p-sortIcon>
              </th>
              <th pSortableColumn="amount">
                Amount <p-sortIcon field="amount"></p-sortIcon>
              </th>
              <th style="width: 4rem"></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-post let-expanded="expanded">
            <tr>
              <td>
                <button
                  type="button"
                  pButton
                  pRipple
                  [pRowToggler]="post"
                  class="p-button-text p-button-rounded p-button-plain"
                  [icon]="
                    expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'
                  "
                ></button>
              </td>
              <td>{{ post.body }}</td>
              <td>{{ post.title }}</td>
              <td>
                <span>{{ post.id }}</span>
              </td>

              <td>
                <p-button type="button" icon="pi pi-search"></p-button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="rowexpansion">
            <tr>
              <td colspan="5">
                <p-table [value]="comments">
                  <ng-template pTemplate="header">
                    <tr>
                      <th pSortableColumn="id">name</th>
                      <th pSortableColumn="customer">Body</th>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-comment>
                    <tr>
                      <td>{{ comment.name }}</td>
                      <td>{{ comment.body }}</td>
                    </tr>
                  </ng-template>
                </p-table>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="6">There are no order for this product yet.</td>
            </tr>
          </ng-template>
        </p-table>
      </td>
    </tr>
  </ng-template>
</p-table>
